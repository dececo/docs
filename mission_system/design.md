# 付费任务系统设计文档

## 一．引言

### 1. 编写目的

本文档面向付费任务系统的产品、开发、测试，及其他相关人员。

### 2. 项目背景

付费任务系统是 [DEC](dechain.io) 旗下生态系统中重要的垂直行业细分领域产品，专门针对软件开发相关人员，包括但不限于开发、产品、运营及外包等。

### 3. 定义

* **付费**: 该文档中所说的付费，通常指的是支付 [DET](https://github.com/dececo/docs/blob/master/token/det/DET.md)。
* **ABI**: Application Binary Interface，应用二进制接口，以太坊智能合约编译时会随二进制一起提供。

### 4. 参考资料

* **以太坊(ethereum)**: https://ethereum.org/
* **Oraclize**: https://docs.oraclize.it/

## 二．总体设计

付费任务系统是一个基于区块链的分布式系统，由[智能合约](#智能合约)，[任务管理平台](#任务管理平台)、[任务展示平台](#任务展示平台)、[任务鉴定平台](#任务鉴定平台)、[任务鉴定平台](#任务鉴定平台)构成。

- **[智能合约](#任务鉴定平台)**：系统交易部分，会全部上链，做到公开透明。因此交易逻辑会由多组智能合约协同完成。
- **[任务管理平台](#任务管理平台)**：托管用户上传的任务说明和后续的交付物。是智能合约最主要的驱动方。
- **[任务展示平台](#任务管理平台)**：展示现有任务列表，以及一些较为简单的互动，如点赞、关注等，包括但不限于客户端、网页等。
- **[任务鉴定平台](#任务管理平台)**：对任务完成与否进行鉴定。一般不需要，只有交易双方出现分歧时才引入。
- **[任务撮合系统](#任务管理平台)**：对任务进行撮合并推送到相关用户。因前期采用广播模式，该模块不需要实现。

### 1. 需求概述

### 2. 软件结构
*（如给出软件系统的结果图。）*

## 三．程序描述（逐个模块给出以下的说明）

### 智能合约

智能合约完成的是核心交易逻辑，包括提交任务时抵押 [DET](https://github.com/dececo/docs/blob/master/token/det/DET.md)，完成任务时支付 [DET](https://github.com/dececo/docs/blob/master/token/det/DET.md) 等。

#### 1．功能



#### 2．性能

目前基于以太坊，执行速度取决于`Gas Price`设置，不建议使用超高`Gas`加速，推荐将所有交易和回调**异步**化。

#### 3．输入项目

预先定义的合约函数，一般由[任务管理平台](#任务管理平台)发起调用。当然也可以由其他任何第三方发起调用。

#### 4．输出项目

除合约状态改变外，还会输出`Event Log`。部分场合可能还会通过 Oraclize 调用其他平台，如[任务管理平台](#任务管理平台)和[任务鉴定平台](#任务管理平台)等。

#### 5．算法

无特殊算法。

#### 6．程序逻辑

待补充。

#### 7．接口

待补充，最后会以 ABI 形式确认。

#### 8．存储分配



#### 9．限制条件



#### 10． 测试要点



### 任务管理平台

#### 1．功能



#### 2．性能

待补充。

#### 3．输入项目

用户上传或点击。

#### 4．输出项目

- 动作完成的相关提示
- 智能合约调用
- 写数据库等持久化存储

#### 5．算法

无特殊算法。

#### 6．程序逻辑

待补充细化。

#### 7．接口



#### 8．存储分配



#### 9．限制条件



#### 10． 测试要点



### 任务展示平台

#### 1．功能



#### 2．性能



#### 3．输入项目



#### 4．输出项目



#### 5．算法



#### 6．程序逻辑



#### 7．接口



#### 8．存储分配



#### 9．限制条件



#### 10． 测试要点



### 任务鉴定平台

#### 1．功能



#### 2．性能

无特殊要求。

#### 3．输入项目



#### 4．输出项目



#### 5．算法

待补充投票规则。

#### 6．程序逻辑



#### 7．接口



#### 8．存储分配



#### 9．限制条件



#### 10． 测试要点



### 任务撮合系统

#### 1．功能



#### 2．性能



#### 3．输入项目



#### 4．输出项目



#### 5．算法

自定义撮合算法是撮合系统的核心，每个实现均可以不同。

#### 6．程序逻辑



#### 7．接口



#### 8．存储分配



#### 9．限制条件



#### 10． 测试要点
